# AI对AI对话线程

这个服务器实现了Claude和多个AI模型（Gemini、O3）之间的**真正AI协作**，它们可以协调并质疑彼此的方法，以增强问题解决和分析能力。

## 工作原理

**多模型协调：**
- **Gemini可以向Claude提出后续问题**以澄清需求或收集更多上下文
- **Claude可以回应**附加信息、文件或精细化指令
- **Claude可以独立工作**在交流之间 - 实施解决方案、收集数据或执行分析
- **Claude可以返回到Gemini**带有进度更新和新上下文以进一步协作
- **跨工具延续** - 从一个工具（如`analyze`）开始，使用相同对话线程继续另一个工具（如`codereview`）
- **两个AI协调它们的方法** - 质疑假设、验证解决方案，并建立在彼此见解基础上
- 每个对话保持完整上下文，同时只发送增量更新
- 对话在会话期间自动在内存中管理

## 示例：多模型AI协调

**提示：** "辩论SwiftUI vs UIKit - 哪个更适合iOS开发？"

**对话流程：**
1. **您：** "辩论SwiftUI vs UIKit - 哪个更适合iOS开发？"
2. **Claude（自动模式）：** "我将编排不同模型之间的辩论以获得多样化观点。"
3. **Gemini Pro：** "从架构角度来看，SwiftUI的声明式范式和状态管理使其在可维护的现代应用方面更优越。"
4. **O3：** "逻辑分析权衡：UIKit提供15+年的稳定性、完全控制和经过验证的可扩展性。SwiftUI不到5年成熟度，持续有破坏性更改。"
5. **Claude：** "让我获得Flash对开发者体验的快速看法..."
6. **Gemini Flash：** "SwiftUI = 更快开发、更少代码、更好预览。UIKit = 更多控制、更好调试、稳定API。"
7. **Claude的综合：** "基于多模型分析：对于优先考虑开发速度的新项目使用SwiftUI，对于需要精细控制或支持较旧iOS版本的应用使用UIKit。"

## 异步工作流能力

**交流间的独立工作：**
- Claude可以在交流之间独立工作（分析代码、实施修复、收集数据）
- 带着进度更新和附加上下文返回到Gemini
- 每次交流只分享增量信息，同时保持完整对话历史
- 通过增量更新自动绕过MCP的25K token限制

## 增强协作功能

**高级协调能力：**
- **交叉质疑**：AI可以挑战彼此的假设和方法
- **协调问题解决**：每个AI为复杂问题贡献其优势
- **上下文构建**：Claude收集信息，Gemini提供深度分析
- **方法验证**：AI可以验证和改进彼此的解决方案
- **跨工具延续**：在不同工具间无缝继续对话，同时保持所有上下文
- **异步工作流**：对话不需要按顺序进行 - Claude可以在交流间处理任务，然后带着附加上下文和进度更新返回到Gemini
- **增量更新**：每次交流只分享新信息，同时保持完整对话历史
- **自动25K限制绕过**：每次交流只发送增量上下文，允许无限总对话大小

## 技术配置

**对话管理：**
- 每个对话最多10次交流（通过`MAX_CONVERSATION_TURNS`配置）
- 3小时过期（通过`CONVERSATION_TIMEOUT_HOURS`配置）
- 线程安全，跨所有工具的内存持久化
- **图像上下文保存** - 图像和视觉参考在对话轮次和工具切换中保持

## 跨工具和跨模型延续示例

**带上下文保存的无缝工具切换：**

```
1. Claude："分析/src/auth.py的安全问题"
   → 自动模式：Claude选择Gemini Pro进行深度安全分析
   → Pro分析并发现漏洞，提供continuation_id

2. Claude："彻底审查认证逻辑"
   → 使用相同continuation_id，但Claude选择O3进行逻辑分析
   → O3看到之前Pro的分析并提供专注于逻辑的审查

3. Claude："调试认证测试失败"
   → 相同continuation_id，Claude保持O3进行调试
   → O3提供有针对性的调试，包含来自两个之前分析的完整上下文

4. Claude："提交前快速样式检查"
   → 相同线程，但Claude切换到Flash以提高速度
   → Flash快速验证格式，了解所有之前的修复
```

## 主要优势

**为什么AI对AI协作重要：**
- **多样化观点**：不同模型为复杂问题带来独特优势
- **上下文保存**：跨工具切换保持完整对话历史
- **高效沟通**：只发送增量更新，最大化上下文使用
- **协调分析**：模型可以建立在彼此见解基础上，而不是孤立工作
- **无缝工作流**：在工具和模型间切换而不丢失上下文
- **增强问题解决**：多个AI思维协同工作产生更好解决方案

## 最佳实践

**最大化AI协作：**
- **让Claude编排**：允许Claude为复杂任务的不同方面选择适当模型
- **使用延续**：在之前对话基础上构建以进行更深分析
- **利用工具切换**：根据需要在分析、审查和调试工具间移动
- **提供清楚上下文**：帮助模型理解更广泛的目标和约束
- **信任过程**：AI对AI对话可以产生任何一个模型单独都无法达到的见解

有关对话持久性和上下文复活的更多信息，请参阅[上下文复活指南](context-revival.md)。
